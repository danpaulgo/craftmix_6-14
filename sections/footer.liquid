<footer id="section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="footer" role="contentinfo">
  <div class='footer-marquee'>
    <div class='js-marquee'>
      <span>{{ section.settings.marquee }}</span>
      <span>{{ section.settings.marquee }}</span>
      <span>{{ section.settings.marquee }}</span>
      <span>{{ section.settings.marquee }}</span>
      <span>{{ section.settings.marquee }}</span>
      <span>{{ section.settings.marquee }}</span>
    </div>
  </div>
  <div class='footer-content'>
  <div class='footer-blocks'>
    <div class='footer-logo'>
      <a href='/'><img src='{{ 'craftmix.svg' | asset_url }}'/></a>
    </div>
    <div class='footer-links'>
      {% for link in linklists[section.settings.menu].links %}
      	<a href='{{ link.url }}'>{{ link.title }}</a>
      {% endfor %}
    </div>
    <div class='footer-social'>
      <span class='label'>Social</span>
      <div class='social-links'>
        <a href='{{ section.settings.facebook }}'><img src='{{ 'facebook.svg' | asset_url }}' class='rise'/></a>
        <a href='{{ section.settings.instagram }}'><img src='{{ 'instagram.svg' | asset_url }}' class='rise'/></a>
        <a href='{{ section.settings.tiktok }}'><img src='{{ 'tik-tok.svg' | asset_url }}' class='rise'/></a>
      </div>
    </div>
    <div class='footer-newsletter'>
	  <div class='footer-newsletter-title'>
        {{ section.settings.newsletter-title }}
      </div>
      <form id='footer-newsletter' action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
        <input type="hidden" name="g" value="{{ section.settings.klaviyo }}">
        <input type="hidden" name="$fields" value="$consent">
        <input type="hidden" name="$list_fields" value="$consent">

        <div class='footer-newsletter-line'>
    	    <input type="email" name="email" class="footer-newsletter-input" aria-label="{{ 'footer.newsletter.input' | t }}" placeholder="Your Email Address" required>
	        <button type="submit" class='newsletter-submit'><img src='{{ 'submit-arrow.svg' | asset_url }}' class='submit-arrow'/></button>
        </div>
        <div class="klaviyo_messages">
          <div class="success_message" style="display:none;">Thanks!</div>
          <div class="error_message" style="display:none;">Error submitting email.</div>
        </div>
      </form>
    </div>
  </div>
  
    <div class='footer-bottom'>
      <div class='footer-bottom-links'>
        {% for link in linklists[section.settings.sub_menu].links %}
          <a href='{{ link.url }}'>{{ link.title }}</a>
        {% endfor %}
      </div>
      <div class='footer-bottom-copy'>
      	{{ section.settings.copyright }}
      </div>
    </div>
  </div>
</footer>

<style>
  #section-{{ section.id }} {
    z-index: 100;
    position: relative;
  }
  
  .footer-newsletter-line {
  	width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: var(--orange-color);
    font-size: 14px;
    font-weight: 600;
    border-bottom: 1px solid var(--orange-color);
  }
  
  .footer-newsletter-line input {
   	background: none;
    border: none;
    flex-grow: 1;
    padding: 10px 0;
  }
  
  .footer-newsletter-line input::placeholder {
	opacity: 0.5;
  }
  
  .newsletter-submit {
    flex: 0 1 50px;
  }
  
  .klaviyo_messages div {
   	margin-top: 2px; 
  }
  
  .js-marquee {
    overflow: hidden; 
  }
  
  .footer-marquee {
   	background-color: var(--orange-color);
    color: white;
    padding-top: 18px;
    padding-bottom: 10px;
    line-height: 1.0;
    font-size: 3.5vw;
    font-family: 'Hornbill';
    font-weight: 800;
    letter-spacing: 0;
    overflow: hidden;
  }
  
   .footer-marquee span { 
      margin-right: 150px;
     width: max-content;
   }
  
  .footer-newsletter {
   	flex: 0 1 320px; 
    margin-left: 3vw;
  }
  
  .footer-bottom-links a {
   	margin-right: 12px; 
  }
  
  .footer-newsletter-title {
    color: var(--orange-color);
    line-height: 1.3;
    letter-spacing: 0.04rem;
    font-weight: 600;
    font-size: 24px;
    margin-bottom: 24px;
  }
  
  .footer-content {
  	width: 100%;
    padding: 40px;
    padding-bottom: 0;
    background: var(--blue-color);
  }
  
  .footer-blocks {
   	display: flex;
    flex-direction: row;
	align-items: flex-start;
    padding: 30px;
    padding-bottom: 100px;
    border-bottom: 1px solid var(--orange-color);
    justify-content: space-between;
  }
  
  .footer-bottom {
    display: flex;
    flex-direction: row;
	align-items: baseline;
    justify-content: space-between;
    color: var(--orange-color);
    padding: 10px;
    font-weight: 600;
  }
  
  .footer-logo {
   	flex: 0 1 25%;
    margin-right: 5vw;
  }
  
  .footer-content a, .footer-content span {
   	color: var(--orange-color);
    font-size: 14px;
  }
  
  .social-links {
    margin-top: 10px;
   	display: flex; 
  }
  
  .social-links img {
   	width: 40px;
    margin-right: 12px;
  }
  
  .footer-links {
   	display: flex;
    flex-direction: column;
  }
  
  .footer-links a, .footer-social .label {
    font-family: 'Goldplay-SemiBold', inherit;
    letter-spacing: 0.08rem;
    font-weight: 600;
    text-transform: uppercase;
    line-height: 1.75; 
  }
  
  
  @media (max-width: 1023px) {
    .footer-content {
      padding: 30px 26px; 
    }
    .footer-marquee {
      font-size: 22px; 
    }
    .footer-blocks {
      flex-direction: column-reverse;
      align-items: center;
      padding: 0;
      padding-bottom: 30px;
    }
    .footer-newsletter {
      flex: unset;
      margin-left: 0;
      margin-bottom: 24px;
    }
    .footer-social {
      margin-bottom: 24px;  
    }
    
    .footer-links {
      width: 100%; 
      margin-bottom: 24px;
    }
    
    .footer-social .label {
      display: none; 
    }
    
    .footer-logo {
      width: 100%;
   	  border-top: 1px solid var(--orange-color); 
      padding-top: 20px;
      margin: 0;
    }
    
    .footer-logo img {
      width: 200px; 
    }
    
    .footer-bottom-links {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }
    
    .footer-bottom-links a {
      margin-bottom: 8px; 
    }
    
  }

</style>

<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
{{ 'flickity.min.js' | asset_url | script_tag }}
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#footer-newsletter', {
    hide_form_on_success: false
  });
//
//   Variables
//
//////////////////////////////////////////////////////////////////////

// Play with this value to change the speed
let tickerSpeed = 1.4;

let flickity = null;
let isPaused = false;
const slideshowEl = document.querySelector('.js-marquee');

//
//   Functions
//
//////////////////////////////////////////////////////////////////////

const update = () => {
  if (isPaused) return;
  if (flickity.slides) {
    flickity.x = (flickity.x - tickerSpeed) % flickity.slideableWidth;
    flickity.selectedIndex = flickity.dragEndRestingSelect();
    flickity.updateSelectedSlide();
    flickity.settle(flickity.x);
  }
  window.requestAnimationFrame(update);
};

const pause = () => {
  isPaused = true;
};

const play = () => {
  if (isPaused) {
    isPaused = false;
    window.requestAnimationFrame(update);
  }
};

//
//   Create Flickity
//
//////////////////////////////////////////////////////////////////////

flickity = new Flickity(slideshowEl, {
  autoPlay: false,
  prevNextButtons: false,
  pageDots: false,
  draggable: false,
  wrapAround: true,
  selectedAttraction: 0.015,
  friction: 0.25 });

flickity.x = 0;

//
//   Add Event Listeners
//
//////////////////////////////////////////////////////////////////////

// slideshowEl.addEventListener('mouseenter', pause, false);
// slideshowEl.addEventListener('focusin', pause, false);
// slideshowEl.addEventListener('mouseleave', play, false);
// slideshowEl.addEventListener('focusout', play, false);

// flickity.on('dragStart', () => {
//   isPaused = true;
// });
 
//
//   Start Ticker
//
//////////////////////////////////////////////////////////////////////

update();
</script>

{% schema %}
{
  "name": "Footer",
  "class": "shopify-section--footer",
  "settings": [
	{
      "type": "text",
      "id": "marquee",
      "label": "Marquee text"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    },
	{
      "type": "link_list",
      "id": "sub_menu",
      "label": "Sub Menu"
    },
	{
      "type": "url",
      "id": "facebook",
      "label": "Facebook link"
    },
	{
      "type": "url",
      "id": "instagram",
      "label": "Instagram link"
    },
	{
      "type": "url",
      "id": "tiktok",
      "label": "Tik tok link"
    },
	{
      "type": "text",
      "id": "klaviyo",
      "label": "Klaviyo list ID"
    },
	{
      "type": "text",
      "id": "copyright",
      "label": "Copyright text"
    },
    {
      "type": "text",
      "id": "newsletter-title",
      "label": "Newsletter title",
      "default": "Sign up to get 15% off your first order"
    }
  ]
}
{% endschema %}